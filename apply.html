<script>
        const chatBox = document.getElementById("chatBox");
        const userInput = document.getElementById("userInput");
        const sendBtn = document.getElementById("sendBtn");
        const chatHistoryList = document.getElementById("chatHistoryList");
        const toggleSidebar = document.getElementById("toggleSidebar");
        const sidebar = document.getElementById("sidebar");
        let chatHistory = [];

        function addMessage(sender, message) {
            const msg = document.createElement("div");
            msg.classList.add("chat-message", sender);
            msg.textContent = message;
            chatBox.appendChild(msg);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function saveHistory() {
            localStorage.setItem("chatHistory", JSON.stringify(chatHistory));
            updateSidebar();
        }

        function updateSidebar() {
            chatHistoryList.innerHTML = "";
            chatHistory.forEach((chat, index) => {
                const li = document.createElement("li");
                li.textContent = chat.user.slice(0, 20) + "...";
                li.addEventListener("click", () => loadChat(index));
                chatHistoryList.appendChild(li);
            });
        }

        function loadChat(index) {
            chatBox.innerHTML = "";
            const chat = chatHistory[index];
            addMessage("user", chat.user);
            addMessage("bot", chat.bot);
        }

        sendBtn.addEventListener("click", () => {
            const message = userInput.value.trim();
            if (!message) return;
            addMessage("user", message);
            userInput.value = "";
            const botReply = "আমি আপনার কথা বুঝেছি: " + message;
            setTimeout(() => {
                addMessage("bot", botReply);
                chatHistory.push({ user: message, bot: botReply });
                saveHistory();
            }, 600);
        });

        // Enter কী চাপলে মেসেজ পাঠানো
        userInput.addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                sendBtn.click();
            }
        });

        toggleSidebar.addEventListener("click", () => {
            sidebar.classList.toggle("closed");
        });

        window.addEventListener("load", () => {
            const stored = localStorage.getItem("chatHistory");
            if (stored) {
                chatHistory = JSON.parse(stored);
                updateSidebar();
            }
        });
    </script>
</body>
</html>
