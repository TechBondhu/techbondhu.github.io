<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ফর্মবন্ধু চ্যাটবট</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla:wght@700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Tailwind কাস্টম স্টাইল */
        .shadow-neon {
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
        }
        .shadow-neon-hover:hover {
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.7);
        }
        .animate-bounce-dots {
            animation: bounce 1.2s infinite;
        }
        .animate-glow {
            animation: glow 1.5s infinite ease-in-out;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        @keyframes glow {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); box-shadow: 0 0 8px rgba(139, 92, 246, 0.6); }
        }
        @keyframes floatIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp {
            from { transform: translate(-50%, -30%); opacity: 0; }
            to { transform: translate(-50%, -50%); opacity: 1; }
        }
        @keyframes slideIn {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(20px); opacity: 0; }
        }
        @keyframes slideInModal {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes slideOutModal {
            from { transform: translateY(0); opacity: 1; }
            to { transform: translateY(50px); opacity: 0; }
        }
        /* কাস্টম স্ক্রলবার */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-gray-100 font-tiro-bangla min-h-screen flex justify-center items-center overflow-hidden">
    <div class="chat-container w-screen h-screen flex flex-col overflow-hidden transition-all duration-300 relative z-1">
        <!-- Header -->
        <div class="header bg-white bg-opacity-10 backdrop-blur-md border border-white border-opacity-20 text-gray-100 p-4 text-2xl font-bold relative flex justify-center items-center">
            <div class="header-icons absolute left-4 top-1/2 transform -translate-y-1/2 flex gap-4">
                <i class="fas fa-home home-icon text-2xl cursor-pointer transition-all duration-300 hover:text-purple-500 hover:scale-110" title="Home" onclick="window.location.href='index.html'"></i>
                <i class="fas fa-bars history-icon text-2xl cursor-pointer transition-all duration-300 hover:text-purple-500 hover:scale-110" id="historyIcon" title="Chat History"></i>
                <i class="fas fa-pen-to-square new-chat-icon text-2xl cursor-pointer transition-all duration-300 hover:text-purple-500 hover:scale-110" id="newChatIcon" title="New Chat"></i>
            </div>
            <div class="header-brand flex items-center gap-2 transition-all duration-300">
                <span class="brand-logo text-2xl font-bold text-purple-500 transition-all duration-300 hover:shadow-neon">ফর্মবন্ধু</span>
                <span class="dynamic-text text-base opacity-0 bg-white bg-opacity-10 border border-white border-opacity-20 rounded-xl px-2 py-1 text-cyan-400 max-w-36 whitespace-nowrap overflow-hidden text-ellipsis transition-all duration-300" id="dynamicHeaderText"></span>
            </div>
            <div class="header-right-icons absolute right-4 top-1/2 transform -translate-y-1/2 flex gap-4">
                <i class="fas fa-cog settings-icon text-2xl cursor-pointer transition-all duration-300 hover:text-purple-500 hover:scale-110" id="settingsIcon" title="সেটিংস" onclick="window.location.href='settings.html'"></i>
                <i class="fas fa-user-cog account-icon text-2xl cursor-pointer transition-all duration-300 hover:text-purple-500 hover:scale-110" title="অ্যাকাউন্ট সেটিংস" onclick="window.location.href='account.html'"></i>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar fixed top-0 left-[-300px] w-72 h-full bg-white bg-opacity-10 backdrop-blur-md border-r border-white border-opacity-20 text-gray-100 p-5 transition-all duration-300 opacity-0 z-10 flex flex-col gap-4 shadow-lg overflow-hidden" id="sidebar">
            <div class="sidebar-header flex justify-between items-center pb-2 border-b border-white border-opacity-20">
                <i class="fas fa-bars sidebar-icon text-2xl cursor-pointer transition-all duration-300 hover:text-cyan-400 hover:scale-110" id="sidebarIcon" title="Menu"></i>
                <i class="fas fa-times close-sidebar text-2xl cursor-pointer transition-all duration-300 hover:text-cyan-400 hover:scale-110" id="closeSidebar" title="Close Sidebar"></i>
            </div>
            <input type="text" class="search-input w-full p-2 text-base border-none rounded-xl outline-none bg-white bg-opacity-10 text-gray-100 placeholder-gray-400 focus:bg-opacity-20 transition-all duration-300" id="searchInput" placeholder="Search chat history...">
            <div class="history-list flex-grow overflow-y-auto overflow-x-hidden flex flex-col gap-2 pr-2 custom-scrollbar" id="historyList"></div>
        </div>

        <!-- Chat Box -->
        <div class="chat-box flex-grow p-5 flex flex-col gap-5 overflow-y-auto h-full bg-transparent relative transition-opacity duration-300" id="chatBox">
            <div class="welcome-message absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center z-2 w-full p-5 animate-[slideUp_0.5s_ease-in-out]" id="welcomeMessage">
                <h2 class="text-3xl text-gray-100 mb-5">ফর্মবন্ধু আজকে কীভাবে আপনাকে সাহায্য করতে পারে?</h2>
                <div class="welcome-buttons flex flex-wrap justify-center gap-2">
                    <button class="welcome-btn px-4 py-2 border border-white border-opacity-20 rounded-xl bg-white bg-opacity-10 backdrop-blur-md text-gray-100 text-sm flex items-center gap-1 cursor-pointer transition-all duration-300 hover:bg-opacity-20 hover:scale-105 shadow-neon-hover" data-genre="এনআইডি আবেদন">
                        <i class="fas fa-id-card text-purple-500 mr-1"></i> এনআইডি আবেদন
                    </button>
                    <button class="welcome-btn px-4 py-2 border border-white border-opacity-20 rounded-xl bg-white bg-opacity-10 backdrop-blur-md text-gray-100 text-sm flex items-center gap-1 cursor-pointer transition-all duration-300 hover:bg-opacity-20 hover:scale-105 shadow-neon-hover" data-genre="পাসপোর্ট আবেদন">
                        <i class="fas fa-passport text-cyan-400 mr-1"></i> পাসপোর্ট আবেদন
                    </button>
                    <button class="welcome-btn px-4 py-2 border border-white border-opacity-20 rounded-xl bg-white bg-opacity-10 backdrop-blur-md text-gray-100 text-sm flex items-center gap-1 cursor-pointer transition-all duration-300 hover:bg-opacity-20 hover:scale-105 shadow-neon-hover" data-genre="কোম্পানি রেজিস্ট্রেশন">
                        <i class="fas fa-building text-yellow-500 mr-1"></i> কোম্পানি রেজিস্ট্রেশন
                    </button>
                    <button id="moreOptionsBtn" class="px-4 py-2 border border-white border-opacity-20 rounded-xl bg-white bg-opacity-10 backdrop-blur-md text-gray-100 text-sm flex items-center gap-1 cursor-pointer transition-all duration-300 hover:bg-opacity-20 hover:scale-105 shadow-neon-hover">
                        <i class="fas fa-ellipsis-h text-gray-500 mr-1"></i> আরও
                    </button>
                </div>
            </div>
            <div class="messages flex-grow overflow-y-auto flex flex-col p-0 pr-4 pb-16 custom-scrollbar" id="messages"></div>
        </div>

        <!-- Input Area -->
        <div class="input-area flex flex-col items-center p-4 bg-transparent relative z-2 w-full mt-auto gap-2">
            <div class="input-wrapper relative flex flex-row items-center w-4/5 max-w-3xl bg-white bg-opacity-10 backdrop-blur-md border border-white border-opacity-20 rounded-3xl p-3 shadow-lg gap-2 transition-all duration-300">
                <div class="preview-container absolute left-3 top-2 hidden items-center gap-1" id="previewContainer">
                    <img id="previewImage" class="preview-image w-10 h-10 object-cover rounded-lg cursor-pointer border border-white border-opacity-20" src="" alt="Image Preview">
                </div>
                <textarea id="userInput" class="flex-grow p-3 text-base border-none rounded-xl outline-none bg-transparent text-gray-100 font-tiro-bangla font-bold resize-none overflow-y-auto min-h-16 max-h-32 w-full box-border leading-relaxed transition-all duration-300 focus:ring-2 focus:ring-purple-500 focus:outline-none" placeholder="আপনার বার্তা লিখুন..."></textarea>
                <input type="file" id="fileInput" class="hidden" accept="image/png, image/jpeg">
                <div class="button-container flex gap-1 justify-end">
                    <button id="uploadBtn" title="Upload Image" class="w-9 h-9 rounded-full bg-purple-500 text-gray-100 text-base flex justify-center items-center cursor-pointer transition-all duration-300 hover:bg-cyan-400 hover:scale-110 shadow-neon-hover">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <button id="sendBtn" title="Send Message" class="w-9 h-9 rounded-full bg-purple-500 text-gray-100 text-base flex justify-center items-center cursor-pointer transition-all duration-300 hover:bg-cyan-400 hover:scale-110 shadow-neon-hover">
                        <i class="fas fa-arrow-up"></i>
                    </button>
                </div>
                <div class="drag-drop-indicator" id="dragDropIndicator"></div>
            </div>
        </div>
    </div>

    <!-- Delete Modal -->
    <div class="modal hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-[1000]" id="deleteModal">
        <div class="modal-content bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-6 w-80 shadow-lg border border-white border-opacity-20 text-gray-100 text-center animate-[slideIn_0.3s_ease-out] font-tiro-bangla font-bold">
            <p class="text-base mb-5">আপনি কি এই চ্যাটটি মুছতে চান?</p>
            <div class="modal-buttons flex justify-between">
                <button class="cancel px-6 py-2 border-none rounded-lg bg-gray-500 text-gray-100 text-sm cursor-pointer transition-all duration-300 hover:bg-gray-600 hover:-translate-y-1 font-tiro-bangla font-bold" id="cancelDelete">বাতিল</button>
                <button class="confirm px-6 py-2 border-none rounded-lg bg-red-500 text-gray-100 text-sm cursor-pointer transition-all duration-300 hover:bg-red-600 hover:-translate-y-1 font-tiro-bangla font-bold" id="confirmDelete">মুছুন</button>
            </div>
        </div>
    </div>

    <!-- Rename Modal -->
    <div class="rename-modal hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-[1000]" id="renameModal">
        <div class="rename-modal-content bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-6 w-80 shadow-lg border border-white border-opacity-20 text-gray-100 text-center animate-[slideIn_0.3s_ease-out]">
            <h3 class="text-xl mb-3 text-purple-500">চ্যাটের নাম পরিবর্তন করুন</h3>
            <input type="text" id="renameInput" class="w-full p-3 mb-5 border-none rounded-lg bg-white bg-opacity-20 text-gray-100 text-base outline-none transition-all duration-300 focus:bg-opacity-30 placeholder-gray-300" placeholder="নতুন নাম লিখুন...">
            <div class="rename-modal-buttons flex justify-between">
                <button class="cancel px-6 py-2 border-none rounded-lg bg-gray-500 text-gray-100 text-sm cursor-pointer transition-all duration-300 hover:bg-gray-600 hover:-translate-y-1 font-tiro-bangla font-bold" id="cancelRename">বাতিল</button>
                <button class="save px-6 py-2 border-none rounded-lg bg-purple-500 text-gray-100 text-sm cursor-pointer transition-all duration-300 hover:bg-cyan-400 hover:-translate-y-1 font-tiro-bangla font-bold" id="saveRename">সংরক্ষণ</button>
            </div>
        </div>
    </div>

    <!-- Image Review Modal -->
    <div class="image-review-modal hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-70 flex justify-center items-center z-[1000]" id="imageReviewModal">
        <div class="image-review-content bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-5 max-w-[90%] max-h-[90%] relative shadow-lg border border-white border-opacity-20">
            <img id="reviewImage" class="review-image max-w-[500px] max-h-[500px] rounded-lg" src="" alt="Review Image">
            <button class="delete-image-btn absolute top-2 right-2 bg-red-500 text-gray-100 border-none rounded-full w-8 h-8 flex justify-center items-center cursor-pointer transition-all duration-300 hover:bg-red-600 shadow-neon-hover" id="deleteImageBtn">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    </div>

    <!-- Genres Modal -->
    <div class="genres-modal hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-[1000]" id="genresModal">
        <div class="genres-modal-content bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-6 w-[90%] max-w-xl shadow-lg text-center animate-[slideInModal_0.3s_ease-out] font-tiro-bangla font-bold">
            <h3 class="text-2xl text-purple-500 mb-5 flex items-center justify-center gap-2">
                <i class="fas fa-list-check text-xl text-purple-500"></i> সকল সেবা
            </h3>
            <div class="genres-list grid grid-cols-2 gap-3 max-h-96 overflow-y-auto p-2 custom-scrollbar" id="genresList"></div>
            <div class="genres-modal-buttons mt-5">
                <button class="cancel px-6 py-2 border-none rounded-lg bg-gray-500 text-gray-100 text-sm cursor-pointer transition-all duration-300 hover:bg-gray-600 hover:-translate-y-1 font-tiro-bangla font-bold" id="closeGenresModal">বন্ধ করুন</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="drag-drop.js"></script>
    <script src="dyna_script.js"></script>
    <script src="chatHistory.js"></script>
    <script src="pdfGenerator.js"></script>
</body>
</html>
